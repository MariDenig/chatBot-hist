<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Painel do Chatbot</title>
    <link rel="stylesheet" href="style.css" />
    <style>
        .admin-container { max-width: 980px; margin: 24px auto; padding: 16px; }
        .admin-login { display:flex; gap:8px; align-items:center; margin-bottom:16px; }
        .cards { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:12px; margin: 16px 0; }
        .card { border:1px solid #ddd; border-radius:8px; padding:12px; background:#fff; }
        .hidden { display:none; }
        textarea { width:100%; min-height: 160px; }
        .conversas-lista li { margin:6px 0; }
        .msg { margin-top:8px; font-size: 0.9rem; }
    </style>
    <script>
        window.API_BASE = (location.hostname === 'localhost' || location.hostname === '127.0.0.1')
            ? 'http://localhost:3001'
            : 'https://chatbot-historia.onrender.com';
    </script>
</head>
<body>
    <div class="admin-container">
        <h1>Painel de Controle do Chatbot</h1>

        <div class="admin-login">
            <input id="admin-secret" type="password" placeholder="Senha de administrador" />
            <button id="btn-login">Entrar</button>
            <span id="login-status" class="msg"></span>
        </div>

        <div id="admin-content" class="hidden">
            <section class="cards">
                <div class="card">
                    <h3>Total de Conversas</h3>
                    <div id="metric-total-conversas">-</div>
                </div>
                <div class="card">
                    <h3>Total de Mensagens</h3>
                    <div id="metric-total-mensagens">-</div>
                </div>
                <div class="card">
                    <h3>Status MongoDB</h3>
                    <div id="metric-mongo">-</div>
                </div>
            </section>

            <section class="card">
                <h3>Últimas 5 Conversas</h3>
                <ul id="ultimas-conversas" class="conversas-lista"></ul>
            </section>

            <section class="card">
                <h3>Instrução de Sistema do Bot</h3>
                <textarea id="system-instruction" placeholder="Defina a personalidade global do bot..."></textarea>
                <div style="margin-top:8px; display:flex; gap:8px;">
                    <button id="btn-carregar-instrucao">Carregar</button>
                    <button id="btn-salvar-instrucao">Salvar Nova Instrução</button>
                    <span id="instrucao-status" class="msg"></span>
                </div>
            </section>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>


